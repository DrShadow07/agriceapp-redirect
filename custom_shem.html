<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouvrir AgriceApp</title>
    <script>
        function openApp() {
            // R√©cup√©rer TOUS les param√®tres de l'URL actuelle
            const urlParams = new URLSearchParams(window.location.search);
            
            // Construire la nouvelle URL pour l'app avec tous les param√®tres
            let appUrl = 'dimsapp://open';
            
            // Ajouter tous les param√®tres s'il y en a
            if (urlParams.toString()) {
                appUrl += '?' + urlParams.toString();
            }
            
            console.log('Ouverture de l app avec URL:', appUrl);
            
            // Ouvrir l'app
            window.location.href = appUrl;
            
            // Rediriger vers Play Store apr√®s 1.5s si √©chec
            setTimeout(function() {
                window.location.href = 'https://play.google.com/store/apps/details?id=ci.directsoft.agriceapp';
            }, 1500);
        }
        
        // Ouvrir automatiquement au chargement
        window.onload = openApp;
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background-color: #f0f8ff;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            text-decoration: none;
            border-radius: 5px;
            display: inline-block;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üîó Ouverture de AgriceApp...</h1>
    <p>Redirection automatique en cours</p>
    
    <p>Si l'application ne s'ouvre pas automatiquement :</p>
    <a href="#" onclick="openApp(); return false;" class="button">Cliquez ici pour ouvrir l'app</a>
    
    <br><br>
    <small>Si l'application n'est pas install√©e, vous serez redirig√© vers le Play Store</small>
    
    <script>
        // Debug: afficher les param√®tres re√ßus
        const urlParams = new URLSearchParams(window.location.search);
        console.log('Param√®tres re√ßus:', Array.from(urlParams.entries()));
    </script>
</body>
</html>